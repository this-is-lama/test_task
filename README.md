# Test Task For Bootcamp

## Описание задания
В данном проекте реализован следующий процесс в упрощенном виде:
Все звонки, совершенные абонентом сотового оператора, собираются на коммутаторах и фиксируются в CDR формате. 
Когда абонент находится в роуминге за процесс сбора его данных отвечает обслуживающая сеть абонента. 
Для стандартизации данных между разными операторами, международная ассоциация GSMA ввела стандарт BCE. 
Согласно ему, данные с CDR должны агрегировать в единый отчет UDR, который впоследствии передается оператору, обслуживающему абонента в домашней сети. 
На основе этого отчета, домашний оператор выставляет абоненту счет.

## Решение
Для выполнения задания было разработано приложение на Java OpenJDK 17 с использованием фреймворка SpringBoot и базы данных H2 Database 

## Основные функции включают
- генерировать CDR записи
- сохранять в базу данных CDR записи
- Rest-API для получения UDR отчетов 
- Генерация сводного отчета с CDR записями по абоненту


##Запуск приложения:
Для запуска приложения в aplication.properties укажите недостающие данные (sa)
   

##Доступ к приложению:
Приложение будет доступно по адресу http://localhost:1405.

## Эндпоинты REST методов
### 1. Генерация CDR записей
- **Метод:** POST
- **URL:** /cdr/generateRecord
- **Описание:** дополнителная генерация CDR записей
- **Ответ:**
- статус ответа HTTP 200 (OK)

### 2. Получение списка CDR записей
- **Метод:** GET
- **URL:** /cdr/all
- **Описание:** Получает список всех CDR записей 
- **Ответ:**
json
[
    {
        "id": 1,
        "callType": "02",
        "phoneOne": "73552160524",
        "phoneTwo": "72568505479",
        "startTime": "1986-05-24T17:41:14",
        "endTime": "1986-05-24T17:48:21"
    },
    ...
]

### 3. Генерация CDR отчета
- **Метод:** POST
- **URL:** /cdr/generateReport?msisdn=12345678901&start=YYYY-MM-DD&end=YYYY-MM-DD
- **Описание:** Генерирует CDR отчет.csv с номером телефона абонента и уникальным UUID запроса
- **Ответ:**
Отчет был успешно сгенерирован. UUID:38de26ba-bb4e-4a08-878d-7b5a832c8444

### 4. Получение UDR записей за месяц
- **Метод:** GET
- **URL:** /udr/getByMsisdn?msisdn=12345678901&month=YYYY-MM
- **Описание:** Получает записи об использовании данных для указанного абонента за указанный месяц
- **Ответ:**
json
{
    "msisdn": "73552160524",
    "incomingCall": {
        "totalTime": "00:50:26"
    },
    "outcomingCall": {
        "totalTime": "00:23:17"
    }

}


### 5. Получение UDR записей за все время пользования
- **Метод:** GET
- **URL:** /udr/getByMsisdn?msisdn=12345678901
- **Описание:** Получает записи об использовании данных для указанного абонента за все время пользования
- **Ответ:**
json
{
    "msisdn": "73552160524",
    "incomingCall": {
        "totalTime": "19:53:18"
    },
    "outcomingCall": {
        "totalTime": "16:24:21"
    }

}

### 6. Получение UDR записей по всем абонентам 
- **Метод:** GET
- **URL:** /udr/getAllByMonth?month=YYYY-MM
- **Описание:** Получает записи об использовании данных для всех абонентов за указанный месяц
- **Ответ:**
json
[
    {
        "msisdn": "75841478259",
        "incomingCall": {
            "totalTime": "00:43:15"
        },
        "outcomingCall": {
            "totalTime": "00:11:00"
        }
    },
    ...

]
